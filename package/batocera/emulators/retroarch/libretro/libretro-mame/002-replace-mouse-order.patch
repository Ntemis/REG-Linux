From 3aa1ff0d6c087ac35530572d09bc42a2591ff78f Mon Sep 17 00:00:00 2001
From: sonninnos <tony@pihaus.org>
Date: Fri, 5 Apr 2024 16:52:08 +0300
Subject: [PATCH] Replace default mouse button order from 132 to 123

---
 src/osd/libretro/retromain.cpp | 28 ++++++++++++++++++++++++++--
 1 file changed, 26 insertions(+), 2 deletions(-)

diff --git a/src/osd/libretro/retromain.cpp b/src/osd/libretro/retromain.cpp
index 0cab858b63f33..37f28153686a6 100644
--- a/src/osd/libretro/retromain.cpp
+++ b/src/osd/libretro/retromain.cpp
@@ -366,12 +366,36 @@ void retro_osd_interface::customize_input_type_list(std::vector<input_type_entry
 	for (input_type_entry &entry : typelist)
 		switch (entry.type())
 		{
-			// Retro:  Select + X => UI_CONFIGURE (Menu)
+			// Replace default mouse button order from "1 3 2" to "1 2 3"
+			case IPT_BUTTON2:
+				switch (entry.player())
+				{
+					case 0:
+						entry.defseq(SEQ_TYPE_STANDARD).set(KEYCODE_LALT, input_seq::or_code, MOUSECODE_BUTTON2_INDEXED(0), input_seq::or_code, GUNCODE_BUTTON2_INDEXED(0));
+						break;
+					case 1:
+						entry.defseq(SEQ_TYPE_STANDARD).set(KEYCODE_S, input_seq::or_code, MOUSECODE_BUTTON2_INDEXED(1), input_seq::or_code, GUNCODE_BUTTON2_INDEXED(1));
+						break;
+				}
+				break;
+			case IPT_BUTTON3:
+				switch (entry.player())
+				{
+					case 0:
+						entry.defseq(SEQ_TYPE_STANDARD).set(KEYCODE_SPACE, input_seq::or_code, MOUSECODE_BUTTON3_INDEXED(0));
+						break;
+					case 1:
+						entry.defseq(SEQ_TYPE_STANDARD).set(KEYCODE_Q, input_seq::or_code, MOUSECODE_BUTTON3_INDEXED(1));
+						break;
+				}
+				break;
+
+			// Select + X
 			case IPT_UI_MENU:
 				entry.defseq(SEQ_TYPE_STANDARD).set(KEYCODE_TAB, input_seq::or_code, JOYCODE_SELECT, JOYCODE_BUTTON3);
 				break;
 
-			// Retro:  Select + Start => CANCEL
+			// Select + Start
 			case IPT_UI_CANCEL:
 				entry.defseq(SEQ_TYPE_STANDARD).set(KEYCODE_ESC, input_seq::or_code, JOYCODE_SELECT, JOYCODE_START);
 				break;
