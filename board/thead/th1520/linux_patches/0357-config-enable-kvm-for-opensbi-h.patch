From 2c484abd55208342801f1cd9e1bab8bbe1662baa Mon Sep 17 00:00:00 2001
From: Han Gao <rabenda.cn@gmail.com>
Date: Fri, 14 Feb 2025 19:42:25 +0800
Subject: [PATCH 357/400] config: enable kvm for opensbi-h

Signed-off-by: Han Gao <rabenda.cn@gmail.com>
---
 arch/riscv/configs/revyos_defconfig | 13 ++++++-------
 1 file changed, 6 insertions(+), 7 deletions(-)

diff --git a/arch/riscv/configs/revyos_defconfig b/arch/riscv/configs/revyos_defconfig
index 52b69636ed1a..d4805726efe3 100644
--- a/arch/riscv/configs/revyos_defconfig
+++ b/arch/riscv/configs/revyos_defconfig
@@ -67,6 +67,8 @@ CONFIG_CPU_FREQ_GOV_SCHEDUTIL=y
 CONFIG_CPUFREQ_DT=m
 CONFIG_CPUFREQ_DT_PLATDEV=y
 CONFIG_RISCV_XUANTIE_TH1520_CPUFREQ=y
+CONFIG_VIRTUALIZATION=y
+CONFIG_KVM=m
 CONFIG_KPROBES=y
 CONFIG_JUMP_LABEL=y
 # CONFIG_COMPAT_32BIT_TIME is not set
@@ -74,7 +76,6 @@ CONFIG_MODULES=y
 CONFIG_MODULE_FORCE_LOAD=y
 CONFIG_MODULE_UNLOAD=y
 CONFIG_MODULE_FORCE_UNLOAD=y
-CONFIG_MODVERSIONS=y
 CONFIG_BLK_DEV_ZONED=y
 CONFIG_BLK_DEV_THROTTLING=y
 CONFIG_BLK_WBT=y
@@ -86,7 +87,6 @@ CONFIG_MQ_IOSCHED_KYBER=m
 CONFIG_IOSCHED_BFQ=m
 CONFIG_BINFMT_MISC=m
 CONFIG_ZSWAP=y
-CONFIG_Z3FOLD=m
 CONFIG_SLAB_FREELIST_RANDOM=y
 CONFIG_SLAB_FREELIST_HARDENED=y
 # CONFIG_COMPAT_BRK is not set
@@ -915,6 +915,10 @@ CONFIG_USB_SIERRA_NET=m
 CONFIG_USB_VL600=m
 CONFIG_USB_NET_CH9200=m
 CONFIG_USB_NET_AQC111=m
+CONFIG_AIC_WLAN_SUPPORT=y
+CONFIG_AIC_FW_PATH="/lib/firmware/aic8800"
+CONFIG_AIC8800_WLAN_SUPPORT=m
+CONFIG_AIC8800_BTLPM_SUPPORT=m
 CONFIG_ATH9K=m
 CONFIG_ATH9K_CHANNEL_CONTEXT=y
 CONFIG_ATH9K_HTC=m
@@ -932,7 +936,6 @@ CONFIG_B43_SDIO=y
 CONFIG_B43LEGACY=m
 CONFIG_BRCMSMAC=m
 CONFIG_BRCMFMAC=m
-CONFIG_BRCMFMAC_SDIO=y
 CONFIG_BRCMFMAC_USB=y
 CONFIG_HOSTAP=m
 CONFIG_HOSTAP_FIRMWARE=y
@@ -2357,7 +2360,3 @@ CONFIG_TEST_USER_COPY=m
 CONFIG_TEST_BPF=m
 CONFIG_TEST_FIRMWARE=m
 CONFIG_TEST_STATIC_KEYS=m
-CONFIG_AIC_WLAN_SUPPORT=y
-CONFIG_AIC_FW_PATH="/lib/firmware/aic8800"
-CONFIG_AIC8800_WLAN_SUPPORT=m
-CONFIG_AIC8800_BTLPM_SUPPORT=m
-- 
2.43.0

