From 186bcf06dd23aa0b9859ea6b5df8a9b3752df381 Mon Sep 17 00:00:00 2001
From: Han Gao <gaohan@iscas.ac.cn>
Date: Fri, 13 Sep 2024 22:05:50 +0800
Subject: [PATCH 325/400] config: enable configs for TH1520

Signed-off-by: Han Gao <gaohan@iscas.ac.cn>
Signed-off-by: Han Gao <rabenda.cn@gmail.com>
---
 arch/riscv/configs/revyos_defconfig | 111 ++++++++++++++++++++++------
 1 file changed, 87 insertions(+), 24 deletions(-)

diff --git a/arch/riscv/configs/revyos_defconfig b/arch/riscv/configs/revyos_defconfig
index 2713b79cff55..24f790192464 100644
--- a/arch/riscv/configs/revyos_defconfig
+++ b/arch/riscv/configs/revyos_defconfig
@@ -1,4 +1,5 @@
-# CONFIG_LOCALVERSION_AUTO is not set
+CONFIG_COMPILE_TEST=y
+# CONFIG_WERROR is not set
 CONFIG_SYSVIPC=y
 CONFIG_POSIX_MQUEUE=y
 CONFIG_NO_HZ_FULL=y
@@ -15,6 +16,7 @@ CONFIG_TASK_IO_ACCOUNTING=y
 CONFIG_PSI=y
 CONFIG_IKCONFIG=y
 CONFIG_IKCONFIG_PROC=y
+CONFIG_IKHEADERS=y
 CONFIG_NUMA_BALANCING=y
 CONFIG_MEMCG=y
 CONFIG_BLK_CGROUP=y
@@ -36,26 +38,25 @@ CONFIG_SCHED_AUTOGROUP=y
 CONFIG_BLK_DEV_INITRD=y
 CONFIG_EXPERT=y
 # CONFIG_SYSFS_SYSCALL is not set
+CONFIG_KALLSYMS_ALL=y
 CONFIG_PROFILING=y
 CONFIG_KEXEC=y
+CONFIG_ARCH_FORCE_MAX_ORDER=15
 CONFIG_ARCH_THEAD=y
 CONFIG_ARCH_XUANTIE=y
+CONFIG_SOC_VIRT=y
+CONFIG_NONPORTABLE=y
 CONFIG_SMP=y
 CONFIG_NUMA=y
-# CONFIG_RISCV_ISA_SVNAPOT is not set
-# CONFIG_RISCV_ISA_SVPBMT is not set
-# CONFIG_RISCV_ISA_V is not set
-# CONFIG_RISCV_ISA_ZBB is not set
-# CONFIG_RISCV_ISA_ZICBOM is not set
-# CONFIG_RISCV_ISA_ZICBOZ is not set
 CONFIG_RISCV_SBI_V01=y
 # CONFIG_RISCV_BOOT_SPINWAIT is not set
+CONFIG_HIBERNATION=y
+CONFIG_PM_WAKELOCKS=y
 CONFIG_PM_DEBUG=y
 CONFIG_PM_ADVANCED_DEBUG=y
 CONFIG_ENERGY_MODEL=y
 CONFIG_CPU_IDLE=y
 CONFIG_CPU_IDLE_GOV_MENU=y
-CONFIG_RISCV_SBI_CPUIDLE=y
 CONFIG_CPU_FREQ=y
 CONFIG_CPU_FREQ_STAT=y
 CONFIG_CPU_FREQ_GOV_POWERSAVE=m
@@ -65,6 +66,7 @@ CONFIG_CPU_FREQ_GOV_CONSERVATIVE=m
 CONFIG_CPU_FREQ_GOV_SCHEDUTIL=y
 CONFIG_CPUFREQ_DT=m
 CONFIG_CPUFREQ_DT_PLATDEV=y
+CONFIG_RISCV_XUANTIE_TH1520_CPUFREQ=y
 CONFIG_KPROBES=y
 CONFIG_JUMP_LABEL=y
 # CONFIG_COMPAT_32BIT_TIME is not set
@@ -550,6 +552,8 @@ CONFIG_BT_HCIBTUSB=m
 CONFIG_BT_HCIBTUSB_AUTOSUSPEND=y
 CONFIG_BT_HCIBTUSB_MTK=y
 CONFIG_BT_HCIBTSDIO=m
+CONFIG_BT_HCIUART=m
+CONFIG_BT_HCIUART_RTL3WIRE=y
 CONFIG_BT_MRVL=m
 CONFIG_BT_MRVL_SDIO=m
 CONFIG_BT_ATH3K=m
@@ -599,10 +603,12 @@ CONFIG_GOOGLE_VPD=m
 CONFIG_EFI_BOOTLOADER_CONTROL=m
 CONFIG_EFI_CAPSULE_LOADER=m
 CONFIG_RESET_ATTACK_MITIGATION=y
+CONFIG_TH1520_AON_PD=y
 CONFIG_GNSS=m
 CONFIG_GNSS_SIRF_SERIAL=m
 CONFIG_GNSS_UBX_SERIAL=m
 CONFIG_MTD=m
+CONFIG_MTD_TESTS=m
 CONFIG_MTD_AR7_PARTS=m
 CONFIG_MTD_BLOCK=m
 CONFIG_MTD_BLOCK_RO=m
@@ -614,9 +620,12 @@ CONFIG_MTD_INTEL_VR_NOR=m
 CONFIG_MTD_PLATRAM=m
 CONFIG_MTD_DATAFLASH=m
 CONFIG_MTD_SST25L=m
+CONFIG_MTD_SLRAM=m
+CONFIG_MTD_PHRAM=m
 CONFIG_MTD_ONENAND=m
 CONFIG_MTD_ONENAND_VERIFY_WRITE=y
 CONFIG_MTD_ONENAND_2X_PROGRAM=y
+CONFIG_MTD_SPI_NAND=m
 CONFIG_MTD_NAND_ECC_SW_BCH=y
 CONFIG_MTD_LPDDR=m
 CONFIG_MTD_SPI_NOR=m
@@ -661,6 +670,8 @@ CONFIG_SENSORS_BH1770=m
 CONFIG_SENSORS_APDS990X=m
 CONFIG_HMC6352=m
 CONFIG_DS1682=m
+CONFIG_USBEN=y
+CONFIG_TH1520_DSMART_CARD=y
 CONFIG_C2PORT=m
 CONFIG_EEPROM_AT24=m
 CONFIG_EEPROM_AT25=m
@@ -670,6 +681,7 @@ CONFIG_EEPROM_EE1004=m
 CONFIG_SENSORS_LIS3_I2C=m
 CONFIG_MISC_RTSX_PCI=m
 CONFIG_MISC_RTSX_USB=m
+CONFIG_MCU_HC32FX=y
 # CONFIG_SCSI_PROC_FS is not set
 CONFIG_BLK_DEV_SD=m
 CONFIG_CHR_DEV_ST=m
@@ -929,6 +941,7 @@ CONFIG_SMSC9420=m
 CONFIG_STMMAC_ETH=y
 CONFIG_DWMAC_DWC_QOS_ETH=m
 CONFIG_DWMAC_GENERIC=m
+CONFIG_DWMAC_XUANTIE=m
 CONFIG_DWMAC_INTEL_PLAT=m
 CONFIG_CASSINI=m
 CONFIG_NIU=m
@@ -1126,6 +1139,7 @@ CONFIG_RTW88_8822CE=m
 CONFIG_RTW88_8822CS=m
 CONFIG_RTW88_8822CU=m
 CONFIG_RTW88_8723DE=m
+CONFIG_RTW88_8723DS=m
 CONFIG_RTW88_8723DU=m
 CONFIG_RTW88_8821CE=m
 CONFIG_RTW88_8821CS=m
@@ -1204,10 +1218,13 @@ CONFIG_TABLET_USB_HANWANG=m
 CONFIG_TABLET_USB_KBTAB=m
 CONFIG_TABLET_USB_PEGASUS=m
 CONFIG_TABLET_SERIAL_WACOM4=m
+CONFIG_INPUT_TOUCHSCREEN=y
+CONFIG_TOUCHSCREEN_GOODIX=y
 CONFIG_RMI4_F34=y
 CONFIG_RMI4_F3A=y
 CONFIG_RMI4_F55=y
 CONFIG_SERIO_ALTERA_PS2=m
+CONFIG_HS_MH248=y
 # CONFIG_LEGACY_PTYS is not set
 # CONFIG_LEGACY_TIOCSTI is not set
 CONFIG_SERIAL_8250=y
@@ -1228,10 +1245,10 @@ CONFIG_HW_RANDOM=y
 CONFIG_HW_RANDOM_VIRTIO=m
 CONFIG_TCG_TIS_SPI=m
 CONFIG_TCG_VTPM_PROXY=m
-CONFIG_I2C=y
 CONFIG_I2C_CHARDEV=m
 CONFIG_I2C_ISCH=m
 CONFIG_I2C_DESIGNWARE_PLATFORM=m
+CONFIG_I2C_MV64XXX=y
 CONFIG_I2C_OCORES=m
 CONFIG_I2C_PCA_PLATFORM=m
 CONFIG_I2C_SIMTEC=m
@@ -1243,6 +1260,9 @@ CONFIG_I2C_VIPERBOARD=m
 CONFIG_SPI=y
 CONFIG_SPI_BUTTERFLY=m
 CONFIG_SPI_CADENCE_QUADSPI=m
+CONFIG_SPI_DW_QUAD=y
+CONFIG_SPI_DESIGNWARE=y
+CONFIG_SPI_DW_MMIO=y
 CONFIG_SPI_LM70_LLP=m
 CONFIG_SPI_SIFIVE=m
 CONFIG_SPI_SPIDEV=y
@@ -1254,9 +1274,13 @@ CONFIG_PTP_1588_CLOCK_IDT82P33=m
 CONFIG_PTP_1588_CLOCK_IDTCM=m
 CONFIG_PTP_1588_CLOCK_OCP=m
 CONFIG_PINCTRL=y
+CONFIG_PINCTRL_TH1520=y
 CONFIG_GPIO_SYSFS=y
+CONFIG_GPIO_DWAPB=y
 CONFIG_GPIO_EXAR=m
 CONFIG_GPIO_SIFIVE=y
+CONFIG_GPIO_PCA953X=y
+CONFIG_GPIO_PCA953X_IRQ=y
 CONFIG_GPIO_PCI_IDIO_16=m
 CONFIG_GPIO_PCIE_IDIO_24=m
 CONFIG_GPIO_VIPERBOARD=m
@@ -1279,12 +1303,10 @@ CONFIG_W1_SLAVE_DS2780=m
 CONFIG_W1_SLAVE_DS2781=m
 CONFIG_W1_SLAVE_DS28E04=m
 CONFIG_W1_SLAVE_DS28E17=m
-CONFIG_POWER_RESET=y
 CONFIG_POWER_RESET_GPIO=y
 CONFIG_POWER_RESET_GPIO_RESTART=y
 CONFIG_POWER_RESET_RESTART=y
-CONFIG_POWER_RESET_SYSCON=y
-CONFIG_POWER_RESET_SYSCON_POWEROFF=y
+CONFIG_BATTERY_CW2015=y
 CONFIG_BATTERY_DS2760=m
 CONFIG_BATTERY_BQ27XXX=m
 # CONFIG_BATTERY_BQ27XXX_I2C is not set
@@ -1316,6 +1338,7 @@ CONFIG_SENSORS_MAX16065=m
 CONFIG_SENSORS_MAX1668=m
 CONFIG_SENSORS_MAX6639=m
 CONFIG_SENSORS_MAX6650=m
+CONFIG_SENSORS_MR75203=m
 CONFIG_SENSORS_ADCXX=m
 CONFIG_SENSORS_LM70=m
 CONFIG_SENSORS_LM73=m
@@ -1330,6 +1353,7 @@ CONFIG_SENSORS_NCT6775=m
 CONFIG_SENSORS_NCT7802=m
 CONFIG_SENSORS_NCT7904=m
 CONFIG_SENSORS_NPCM7XX=m
+CONFIG_SENSORS_PWM_FAN=m
 CONFIG_SENSORS_SHT21=m
 CONFIG_SENSORS_SHT3x=m
 CONFIG_SENSORS_SHT4x=m
@@ -1360,14 +1384,20 @@ CONFIG_THERMAL_GOV_FAIR_SHARE=y
 CONFIG_THERMAL_GOV_BANG_BANG=y
 CONFIG_THERMAL_GOV_USER_SPACE=y
 CONFIG_THERMAL_GOV_POWER_ALLOCATOR=y
-CONFIG_DEVFREQ_THERMAL=y
+CONFIG_CPU_THERMAL=y
+CONFIG_THERMAL_EMULATION=y
 CONFIG_WATCHDOG=y
+CONFIG_WATCHDOG_OPEN_TIMEOUT=32
 CONFIG_WATCHDOG_SYSFS=y
 CONFIG_WATCHDOG_HRTIMER_PRETIMEOUT=y
 CONFIG_WATCHDOG_PRETIMEOUT_GOV=y
+CONFIG_WATCHDOG_PRETIMEOUT_GOV_NOOP=m
+CONFIG_WATCHDOG_PRETIMEOUT_GOV_PANIC=m
 CONFIG_WATCHDOG_PRETIMEOUT_DEFAULT_GOV_NOOP=y
 CONFIG_SOFT_WATCHDOG=m
 CONFIG_DA9063_WATCHDOG=m
+CONFIG_DW_WATCHDOG=y
+CONFIG_TH1520_PMIC_WATCHDOG=y
 CONFIG_MFD_AXP20X_I2C=m
 CONFIG_MFD_DA9063=m
 CONFIG_MFD_VIPERBOARD=m
@@ -1591,21 +1621,23 @@ CONFIG_VIDEO_ADV7170=m
 CONFIG_VIDEO_ADV7175=m
 CONFIG_VIDEO_SAA7185=m
 CONFIG_DVB_DUMMY_FE=m
-CONFIG_DRM=m
+CONFIG_DRM=y
 CONFIG_DRM_LOAD_EDID_FIRMWARE=y
 CONFIG_DRM_DP_AUX_CHARDEV=y
-CONFIG_DRM_RADEON=m
-CONFIG_DRM_AMDGPU=m
-CONFIG_DRM_AMDGPU_SI=y
-CONFIG_DRM_AMDGPU_CIK=y
-CONFIG_DRM_AMDGPU_USERPTR=y
-CONFIG_DRM_AMD_DC_SI=y
 CONFIG_DRM_VGEM=m
 CONFIG_DRM_UDL=m
 CONFIG_DRM_QXL=m
 CONFIG_DRM_VIRTIO_GPU=m
+CONFIG_DRM_PANEL_SIMPLE=y
+CONFIG_DRM_PANEL_ILITEK_ILI9881C=y
+CONFIG_DRM_PANEL_JADARD_JD9365DA_H3=y
+CONFIG_DRM_PANEL_HX8279=y
+CONFIG_DRM_PANEL_LT8911=y
+CONFIG_DRM_ETNAVIV=m
 CONFIG_DRM_BOCHS=m
 CONFIG_DRM_CIRRUS_QEMU=m
+CONFIG_DRM_VERISILICON=y
+CONFIG_DRM_POWERVR_ROGUE=m
 CONFIG_FB=y
 CONFIG_FB_S3=m
 CONFIG_FB_3DFX=m
@@ -1694,12 +1726,24 @@ CONFIG_SND_FIREWIRE_TASCAM=m
 CONFIG_SND_FIREWIRE_MOTU=m
 CONFIG_SND_FIREFACE=m
 CONFIG_SND_SOC=m
+CONFIG_SND_SOC_XUANTIE=m
+CONFIG_SND_SOC_XUANTIE_TH1520_I2S=m
+CONFIG_SND_SOC_XUANTIE_TH1520_I2S_CH8=m
+CONFIG_SND_SOC_XUANTIE_TH1520_HDMI_PCM=m
+CONFIG_SND_SOC_XUANTIE_TH1520_TDM=m
+CONFIG_SND_SOC_XUANTIE_TH1520_SPDIF=m
+CONFIG_RK_HEADSET=m
+CONFIG_SND_SOC_AW87519=m
+CONFIG_SND_SOC_ES7210=m
+CONFIG_SND_SOC_ES8156=m
+CONFIG_SND_SOC_ES8323=m
 CONFIG_SND_SOC_MAX98373_SDW=m
 CONFIG_SND_SOC_RT1308_SDW=m
 CONFIG_SND_SOC_RT5682_SDW=m
 CONFIG_SND_SOC_RT700_SDW=m
 CONFIG_SND_SOC_RT711_SDW=m
 CONFIG_SND_SOC_RT715_SDW=m
+CONFIG_SND_SIMPLE_CARD=m
 CONFIG_HID=m
 CONFIG_HID_BATTERY_STRENGTH=y
 CONFIG_HIDRAW=y
@@ -1817,13 +1861,14 @@ CONFIG_HID_ALPS=m
 CONFIG_HID_MCP2221=m
 CONFIG_HID_PID=y
 CONFIG_USB_HIDDEV=y
+CONFIG_I2C_HID_OF=m
+CONFIG_I2C_HID_OF_GOODIX=m
 CONFIG_USB_LED_TRIG=y
 CONFIG_USB_ANNOUNCE_NEW_DEVICES=y
 CONFIG_USB_DYNAMIC_MINORS=y
 CONFIG_USB_LEDS_TRIGGER_USBPORT=m
 CONFIG_USB_MON=m
 CONFIG_USB_XHCI_HCD=m
-CONFIG_USB_XHCI_PLATFORM=m
 CONFIG_USB_EHCI_HCD=m
 CONFIG_USB_EHCI_ROOT_HUB_TT=y
 CONFIG_USB_EHCI_HCD_PLATFORM=m
@@ -1854,6 +1899,9 @@ CONFIG_USBIP_VHCI_HC_PORTS=15
 CONFIG_USBIP_VHCI_NR_HCS=8
 CONFIG_USBIP_HOST=m
 CONFIG_USB_MUSB_HDRC=m
+CONFIG_USB_MUSB_HOST=y
+CONFIG_USB_DWC3=m
+CONFIG_USB_DWC3_HOST=y
 CONFIG_USB_SERIAL=m
 CONFIG_USB_SERIAL_GENERIC=y
 CONFIG_USB_SERIAL_SIMPLE=m
@@ -1928,7 +1976,10 @@ CONFIG_USB_EHSET_TEST_FIXTURE=m
 CONFIG_USB_ISIGHTFW=m
 CONFIG_USB_YUREX=m
 CONFIG_USB_CHAOSKEY=m
+CONFIG_USB_ONBOARD_HUB=m
 CONFIG_NOP_USB_XCEIV=m
+CONFIG_USB_GADGET=m
+CONFIG_TYPEC=m
 CONFIG_MMC=y
 CONFIG_PWRSEQ_EMMC=m
 CONFIG_PWRSEQ_SIMPLE=m
@@ -1996,9 +2047,11 @@ CONFIG_RTC_DRV_DS1307=m
 CONFIG_RTC_DRV_PCF85063=m
 CONFIG_RTC_DRV_PCF8563=m
 CONFIG_RTC_DRV_DA9063=m
-CONFIG_RTC_DRV_GOLDFISH=y
+CONFIG_RTC_DRV_XGENE=m
 CONFIG_DMADEVICES=y
+CONFIG_DW_AXI_DMAC=y
 CONFIG_ASYNC_TX_DMA=y
+CONFIG_DMATEST=y
 CONFIG_UIO_CIF=m
 CONFIG_UIO_AEC=m
 CONFIG_UIO_SERCOS3=m
@@ -2017,8 +2070,14 @@ CONFIG_STAGING=y
 CONFIG_RTL8723BS=m
 CONFIG_R8712U=m
 CONFIG_QLGE=m
-CONFIG_GOLDFISH=y
+CONFIG_CLK_TH1520_FM=y
+CONFIG_HWSPINLOCK=y
+CONFIG_HWSPINLOCK_TH1520=y
 CONFIG_MAILBOX=y
+CONFIG_RPMSG_CHAR=m
+CONFIG_RPMSG_CTRL=m
+CONFIG_RPMSG_TH1520=y
+CONFIG_RPMSG_VIRTIO=y
 CONFIG_SOUNDWIRE=m
 CONFIG_SOUNDWIRE_QCOM=m
 CONFIG_MEMORY=y
@@ -2256,9 +2315,11 @@ CONFIG_TSYS02D=m
 CONFIG_MAX31856=m
 CONFIG_PWM=y
 CONFIG_PWM_SIFIVE=m
+CONFIG_PWM_XUANTIE=m
 CONFIG_RESET_SIMPLE=y
 CONFIG_LIBNVDIMM=m
 CONFIG_DEV_DAX=m
+CONFIG_NVMEM_XUANTIE_TH1520_EFUSE=y
 CONFIG_EXT4_FS=y
 CONFIG_EXT4_FS_POSIX_ACL=y
 CONFIG_EXT4_FS_SECURITY=y
@@ -2309,7 +2370,6 @@ CONFIG_FAT_DEFAULT_IOCHARSET="ascii"
 CONFIG_FAT_DEFAULT_UTF8=y
 CONFIG_EXFAT_FS=m
 CONFIG_PROC_KCORE=y
-CONFIG_TMPFS=y
 CONFIG_TMPFS_POSIX_ACL=y
 CONFIG_TMPFS_INODE64=y
 CONFIG_HUGETLBFS=y
@@ -2459,6 +2519,7 @@ CONFIG_IMA_ARCH_POLICY=y
 CONFIG_EVM=y
 CONFIG_DEFAULT_SECURITY_APPARMOR=y
 CONFIG_LSM="landlock,lockdown,yama,loadpin,safesetid,integrity,apparmor,selinux,smack,tomoyo,bpf"
+CONFIG_INIT_STACK_ALL_ZERO=y
 CONFIG_INIT_ON_ALLOC_DEFAULT_ON=y
 CONFIG_BUG_ON_DATA_CORRUPTION=y
 CONFIG_CRYPTO_USER=m
@@ -2539,8 +2600,10 @@ CONFIG_STACK_TRACER=y
 CONFIG_FTRACE_SYSCALLS=y
 CONFIG_TRACER_SNAPSHOT=y
 CONFIG_BLK_DEV_IO_TRACE=y
+CONFIG_BPF_KPROBE_OVERRIDE=y
 CONFIG_IO_STRICT_DEVMEM=y
 CONFIG_NOTIFIER_ERROR_INJECTION=m
+CONFIG_FUNCTION_ERROR_INJECTION=y
 CONFIG_TEST_USER_COPY=m
 CONFIG_TEST_BPF=m
 CONFIG_TEST_FIRMWARE=m
-- 
2.43.0

