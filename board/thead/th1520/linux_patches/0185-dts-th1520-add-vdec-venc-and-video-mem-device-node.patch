From b0b81bb9106647989c69e17aea52d2cb8118248e Mon Sep 17 00:00:00 2001
From: xianbing Zhu <xianbing.zhu@linux.alibaba.com>
Date: Sun, 1 Sep 2024 00:03:34 +0800
Subject: [PATCH 185/400] dts: th1520: add vdec venc and video mem device node

compatible changed to xuantie,th1520-xxxx

Signed-off-by: xianbing Zhu <xianbing.zhu@linux.alibaba.com>
Signed-off-by: Han Gao <gaohan@iscas.ac.cn>
---
 arch/riscv/boot/dts/thead/th1520.dtsi | 85 +++++++++++++++++++++++++++
 1 file changed, 85 insertions(+)

diff --git a/arch/riscv/boot/dts/thead/th1520.dtsi b/arch/riscv/boot/dts/thead/th1520.dtsi
index 9e36c3b535c6..25b6feab723d 100644
--- a/arch/riscv/boot/dts/thead/th1520.dtsi
+++ b/arch/riscv/boot/dts/thead/th1520.dtsi
@@ -1732,5 +1732,90 @@ opp-396000000 {
 				opp-microvolt = <800000>;
 			};
 		};
+
+		vdec_opp_table: opp_table_vdec {
+			compatible = "operating-points-v2";
+
+			opp00 {
+				opp-hz = /bits/ 64 <158400000>;
+				opp-microvolt = <875000>;
+			};
+			opp01 {
+				opp-hz = /bits/ 64 <198000000>;
+				opp-microvolt = <875000>;
+			};
+			opp02 {
+				opp-hz = /bits/ 64 <237600000>;
+				opp-microvolt = <875000>;
+			};
+			opp03 {
+				opp-hz = /bits/ 64 <264000000>;
+				opp-microvolt = <887500>;
+			};
+			opp04 {
+				opp-hz = /bits/ 64 <297000000>;
+				opp-microvolt = <937500>;
+			};
+			opp05 {
+				opp-hz = /bits/ 64 <396000000>;
+				opp-microvolt = <1012500>;
+			};
+			opp06 {
+				opp-hz = /bits/ 64 <475200000>;
+				opp-microvolt = <1037500>;
+			};
+			opp07 {
+				opp-hz = /bits/ 64 <594000000>;
+				opp-microvolt = <1050000>;
+			};
+		};
+
+		venc_opp_table: opp_table_venc {
+			compatible = "operating-points-v2";
+			opp00 {
+				opp-hz = /bits/ 64 <200000000>;
+			};
+			opp01 {
+				opp-hz = /bits/ 64 <250000000>;
+			};
+			opp02 {
+				opp-hz = /bits/ 64 <333300000>;
+			};
+			opp03 {
+				opp-hz = /bits/ 64 <500000000>;
+			};
+		};
+
+		vdec: vdec@ffecc00000 {
+			compatible = "xuantie,th1520-vc8000d";
+			reg = <0xff 0xecc00000 0x0 0x8000>;
+			interrupts = <131 IRQ_TYPE_LEVEL_HIGH>;
+			power-domains = <&pd TH1520_AON_VDEC_PD>;
+			clocks = <&vpsys_clk_gate TH1520_VPSYS_VDEC_ACLK>,
+				<&vpsys_clk_gate TH1520_VPSYS_VDEC_CCLK>,
+				<&vpsys_clk_gate TH1520_VPSYS_VDEC_PCLK>;
+			clock-names = "aclk", "cclk", "pclk";
+			operating-points-v2 = <&vdec_opp_table>;
+			status = "okay";
+		};
+
+		venc: venc@ffecc10000 {
+			compatible = "xuantie,th1520-vc8000e";
+			reg = <0xff 0xecc10000 0x0 0x8000>;
+			interrupts = <133 IRQ_TYPE_LEVEL_HIGH>;
+			power-domains = <&pd TH1520_AON_VENC_PD>;
+			clocks = <&vpsys_clk_gate TH1520_VPSYS_VENC_ACLK>,
+				<&vpsys_clk_gate TH1520_VPSYS_VENC_CCLK>,
+				<&vpsys_clk_gate TH1520_VPSYS_VENC_PCLK>;
+			clock-names = "aclk", "cclk", "pclk";
+			operating-points-v2 =<&venc_opp_table>;
+			status = "okay";
+		};
+
+		vidmem: vidmem@ffecc08000 {
+			compatible = "xuantie,th1520-vidmem";
+			reg = <0xff 0xecc08000 0x0 0x1000>;
+			status = "okay";
+		};
 	};
 };
-- 
2.43.0

